<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>YAN_1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- OneSignal Push Notifications -->
<script src="https://cdn.onesignal.com/sdks/web/v16/OneSignalSDK.page.js" defer></script>
<script>
  window.OneSignalDeferred = window.OneSignalDeferred || [];
  OneSignalDeferred.push(async function(OneSignal) {
    await OneSignal.init({
      appId: "7998d24d-4c7b-411b-a1a2-6658217b3b7b",
    });
  });
</script>

<style>
:root{
  --bg:#020617;
  --border:#334155;
  --text:#e5e7eb;
  --accent:#38bdf8;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui, sans-serif;
}

/* HEADER */
header{
  text-align:center;
  padding:2rem 1rem 1rem;
}

.brand{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:.8rem;
  line-height:1; /* Fixed baseline alignment */
}

.brand img{
  height:2.6rem;
  width:auto;
  display:block; /* Prevents inline quirks */
  object-fit:contain;
  cursor: pointer;
}

.brand h1{
  margin:0;
  line-height:1; /* Removes extra heading spacing */
  font-size:2.4rem;
  letter-spacing:3px;
  cursor: pointer;
}

.tagline{
  margin-top:.6rem;
  font-size:1.1rem;
  background:linear-gradient(90deg,#22d3ee,#a78bfa,#f472b6);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* MAIN */
.embed-wrap{
  position:relative;
  width:100vw;
  margin-left:calc(50% - 50vw);
}

.embed-wrap iframe{
  width:100vw;
  height:420px;
  border:none;
}

/* FULLSCREEN */
.fullscreen{
  position:absolute;
  top:14px;
  right:18px;
  font-size:1.2rem;
  cursor:pointer;
  opacity:.75;
}
.fullscreen:hover{opacity:1}

/* CONTENT */
.content-inner{
  max-width:900px;
  margin:auto;
  padding:1.5rem;
}

.meta{line-height:1.7;margin-bottom:1rem}

.actions{
  display:flex;
  gap:1rem;
  align-items:center;
}

.button{
  padding:.6rem 1.3rem;
  background:var(--accent);
  color:#020617;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
}

.share{
  cursor:pointer;
  font-size:1.3rem;
  opacity:.75;
}
.share:hover{opacity:1}

/* NAVIGATION */
.nav{
  display:flex;
  justify-content:center;
  gap:3rem;
  font-size:1.8rem;
  margin:3rem 0;
  cursor:pointer;
  opacity:.75;
}
.nav span:hover{opacity:1}

/* FOOTER PAGE */
footer iframe{
  width:100%;
  height:100vh;
  border:none;
}

/* FULLSCREEN OVERLAY */
#overlay,#page4Overlay{
  position:fixed;
  inset:0;
  background:rgba(2,6,23,.95);
  display:none;
  z-index:9999;
}

#overlay iframe,
#page4Overlay iframe{
  width:100vw;
  height:100vh;
  border:none;
}

.close{
  position:absolute;
  top:14px;
  right:20px;
  font-size:1.6rem;
  cursor:pointer;
  z-index:10000;
}

#page4Close{
  color:#ef4444; /* Dark Red */
  font-weight:bold;
  text-shadow: 0 0 6px rgba(239,68,68,0.6); /* Glowing effect */
}
</style>
</head>

<body>

<!-- PAGE4 POPUP -->
<div id="page4Overlay">
  <div id="page4Close" class="close" onclick="closePage4()">✕</div>
  <iframe src="page4.html"></iframe>
</div>

<header>
  <div class="brand">
    <img src="images/logo.png" alt="YAN_1" onclick="openLogoFullscreen()"> <!-- Made Clickable -->
    <h1 onclick="openLogoFullscreen()">YAN_1</h1> <!-- Also clickable -->
  </div>
  <div class="tagline">Where everything meets.</div>
</header>

<main id="content"></main>

<!-- NAVIGATION CONTROLS -->
<div class="nav">
  <span onclick="prevItem()">❮❮❮❮</span>
  <span onclick="nextItem()">❯❯❯❯</span>
</div>

<footer>
  <iframe src="page1.html"></iframe>
</footer>

<!-- FULLSCREEN -->
<div id="overlay">
  <div class="close" onclick="exitFullscreen()">✕</div>
  <iframe id="fsFrame"></iframe>
</div>

<script>
let data=[], index=0;

/* PAGE4 AUTO OPEN */
window.onload = () => {
  document.getElementById('page4Overlay').style.display='block';
};

/* FETCH DATA */
fetch('data.json')
  .then(r=>r.json())
  .then(j=>{ data=j; render(); });

function getEmbed(link){
  return link?.includes('archive.org')
    ? 'https://archive.org/embed/'+link.split('/details/')[1]
    : '';
}

function render(){
  const i=data[index];
  const e=getEmbed(i.archive_link);

  content.innerHTML=`
    ${e?`
    <div class="embed-wrap">
      <span class="fullscreen" onclick="nativeFullscreen()">⛶</span>
      <iframe id="embedFrame" src="${e}"></iframe>
    </div>`:''}

    <div class="content-inner">
      <div class="meta">
        <strong>Details:</strong> ${i.details}<br>
        <strong>Others:</strong> ${i.others}
      </div>

      <div class="actions">
        <span class="button" onclick="openLink('${i.link1}')">Open</span>
        <span class="share" onclick="share('${i.link1}','YAN_1')">ᯓ➤</span>
      </div>
    </div>
  `;
}

/* FULLSCREEN */
function nativeFullscreen(){
  document.getElementById('embedFrame')?.requestFullscreen();
}
function exitFullscreen(){
  document.exitFullscreen?.();
}

/* SHARE */
function share(url,title){
  navigator.share
    ? navigator.share({title,url})
    : navigator.clipboard.writeText(url)&&alert('Link copied');
}

/* LINKS */
function openLink(u){ window.open(u,'_blank'); }

/* PAGE4 CLOSE */
function closePage4(){
  document.getElementById('page4Overlay').style.display='none';
}

/* NAVIGATION LOGIC */
function nextItem(){
  index = (index + 1) % data.length;
  render();
}

function prevItem(){
  index = (index - 1 + data.length) % data.length;
  render();
}

/* LOGO FULLSCREEN */
function openLogoFullscreen(){
  const overlay = document.getElementById('overlay');
  const frame = document.getElementById('fsFrame');
  frame.src = "images/logo.png"; // Or point to actual full-screen image/video
  overlay.style.display = 'flex';
}

/* ESC */
document.addEventListener('keydown',e=>{
  if(e.key==='Escape'){
    exitFullscreen();
    closePage4();
  }
});
</script>

</body>
</html>
